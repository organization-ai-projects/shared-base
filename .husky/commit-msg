#!/usr/bin/env sh
. "$(dirname "$0")/_/husky.sh"

# Validate commit message
echo "ğŸ“ Validating commit message..."

# Check if Commitlint is installed
if ! command -v pnpm commitlint > /dev/null; then
  echo "âŒ Commitlint is not installed. Please install it with 'pnpm install @commitlint/cli'."
  exit 1
fi

# Run Commitlint
pnpm commitlint --edit "$1"

# Check if validation passed
if [ $? -ne 0 ]; then
  echo "âŒ Commit message validation failed. Please follow the commit conventions."
  echo "ğŸ”— See: https://www.conventionalcommits.org/"
  echo "Example: feat(core): add new feature"
  exit 1
fi

# Show validated message
echo "ğŸ“„ Commit message: $(cat $1)"
echo "âœ… Commit message validation passed."
